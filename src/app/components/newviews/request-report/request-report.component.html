<app-navbar></app-navbar>

<!--Data object from database-->
<div class="box">


  <div class="datagrid overflow-x-auto block">
    <div align="center" class=" font-bold capitalize" style="margin-bottom: 5PX; font-size: 20px;">
      HISTORIAL DE SOLICITUDES <br>
    </div>

    <div class="filters">
      <div class="row">
        <div style="float: left;">
          <mat-form-field appearance="fill" class="input-width" style="margin-right: 10px;margin-left: 10px">
            <mat-label>Fecha Del</mat-label>
            <input matInput [matDatepicker]="picker1" [ngModel]="startDateInput"
              (ngModelChange)="getPermissions($event, endDateInput)" readonly>
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
          </mat-form-field>
          <mat-form-field appearance="fill" class="input-width">
            <mat-label>Fecha Al</mat-label>
            <input matInput [matDatepicker]="picker2" [ngModel]="endDateInput"
              (ngModelChange)="getPermissions(startDateInput, $event)" readonly>
            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
          </mat-form-field>
          <mat-form-field appearance="fill" style="margin-left: 10px;">
            <mat-label>Filtrar por estado</mat-label>
            <mat-select [(ngModel)]="statusfilter">
              <mat-option *ngFor="let estado of estados" [value]="estado.value">
                {{estado.viewValue}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div style="float:right;">


          <button mat-raised-button class="boton" style="margin-left: 10px;height: 59px; margin-right: 10px">Generar Reporte</button>
        </div>
      </div>
    </div>
    <table>

      <thead>

        <tr style="text-align: center;">
          <th>No.</th>
          <th>EMITIDO</th>
          <th>FECHA DE PERMISO</th>
          <th>SOLICITANTE</th>

          <th>ESTADO DE SOLICITUD</th>
          <th>DETALLES</th>
          <th>IMPRIMIR</th>
        </tr>
      </thead>
      <tbody style="text-align: center;"
        *ngFor="let item of permissionreq | filterStatus:statusfilter let indexof = index;" style="text-align: center;"  style="text-align: center;">
        <td>{{indexof + 1}}</td>
        <td>{{item.submittedAt | date: 'd MMM y H:mm' | uppercase }}</td>
        <td>{{item.permissionDate | date: 'd MMM y ' | uppercase }}</td>
        <td>{{item.person.fullname}}</td>
        <td>{{item.status}}</td>
        <td style="width: 50px;">
          <div class="rounded-full cursor-pointer">
            <div class="justify-center text-center" [routerLink]="['/solicitudpermiso/edit/',item.uuid]">
              <i class="fas fa-check fas fa-edit fa-2x fa-fw fa-inverse text-green-500"></i>
            </div>
          </div>
        </td>
        <td style="width: 10px;">
          <div class="rounded-full cursor-pointer">
            <div class="justify-center text-center ">
              <i class="fas fa-print fa-2x fa-fw fa-inverse text-gray-900"></i>
            </div>
          </div>
        </td>

      </tbody>

    </table>

  </div>

</div>
