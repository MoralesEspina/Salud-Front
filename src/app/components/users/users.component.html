<app-navbar></app-navbar>
<div class="mt-8 px-6 ml-12">
<div class="contenedor" >
    <div class="user border rounded-md " style="width: 500px; height: 410px;">
      <form class="inputsize">
        <mat-dialog-content [formGroup]="form">
          <div class="ed-item ed-container">
            <div class="ed-item s-100 m-100 l-100">
              <p>Crear usuario</p>
              <mat-form-field appearance="outline" class="w-full" style="margin-top: 10px;">
                <mat-label>Persona</mat-label>

                <mat-select formControlName='uuidPerson'>
                  <input type="text" class="p-2" autocomplete="off" matInput placeholder="Buscar por Nombre"
                    #multiUserSearch (input)="onInputChange()">
                  <mat-option *ngFor="let persona of persons" [value]="persona.uuid">
                    {{persona.fullname}}
                  </mat-option>
                </mat-select>

              </mat-form-field>
            </div>
            <div class="ed-item s-100 m-100 l-100">
              <span *ngIf="submitted && f.username.errors" class="text-red-700 text-xs animated fadeIn">Ingrese el
                usuario</span>
              <mat-form-field appearance="outline" class="inputheight">
                <mat-label>Nombre de usuario</mat-label>
                <input matInput formControlName="username" [ngClass]="{'is-invalid':submitted && f.username.errors}">
              </mat-form-field>
            </div>
            <div class="ed-item s-100 m-100 l-100">
              <span *ngIf="submitted && f.password.errors" class="text-red-700 text-xs animated fadeIn">Ingrese la
                contraseña</span>
              <mat-form-field appearance="outline" class="inputheight">
                <mat-label>Contraseña</mat-label>
                <input matInput type="password" formControlName="password"
                  [ngClass]="{'is-invalid':submitted && f.password.errors}">
              </mat-form-field>
              <span *ngIf="submitted && f.password.errors" class="text-blue-700"> </span>
            </div>
            <div class="ed-item s-100 m-100 l-100">
              <span *ngIf="submitted && f.id_rol.errors" class="text-red-700 text-xs animated fadeIn">Seleccione el
                rol</span>
              <mat-form-field appearance="outline" class="example-full-width inputheight">
                <mat-label>Rol</mat-label>
                <mat-select formControlName="id_rol" [ngClass]="{'is-invalid':submitted && f.id_rol.errors}">
                  <mat-option *ngFor="let option of rols" [value]="option.id_rol">
                    {{option.type_rol}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </mat-dialog-content>
        <div class="ed-item ed-container ">
          <div class="ed-item s-50">
            <div class="py-1 ">
              <button class="mycustom-buttom-primary hover:bg-green-700 rounded-lg tamano"
                (click)="save()">GUARDAR</button>
            </div>
          </div>
          <div class="ed-item s-50">
            <div class="py-1 ">
              <button class="mycustom-button-warning hover:bg-red-700 rounded-lg tamano">CANCELAR</button>
            </div>
          </div>
        </div>
      </form>
    </div>
    <!--Data object from database-->
    <div class="tabla1 datagrid border rounded-md " style=" margin-bottom: 20px;">
      <table>
        <thead style="text-align: center;">
          <tr>
            <th>NO</th>
            <th>NOMBRE DE USUARIO</th>
            <th>ROL</th>
            <th>EDITAR</th>
            <th>ELIMINAR</th>
          </tr>
        </thead>
        <tbody >
          <tr
            *ngFor="let duser of admins | paginate: { id: 'Page', itemsPerPage: tableSize, currentPage: p } let indexof = index let u of usuario;"
            class="text-lg" [class.alt]="(indexof + 1)%2==1">
            <td style="text-align: center;">{{tableSize * (p -1 ) + indexof + 1}}</td>
            <td >{{duser.username}}</td>
            <td style="text-align: center;">{{duser.rol}}</td>
            <td style="width: 10px;">
              <div class="rounded-full cursor-pointer" (click)="UpdateUser(duser.uuid)">
                <div class="justify-center text-center ">
                  <i class="fas fa-edit fa-2x fa-fw fa-inverse text-green-500"></i>
                </div>
              </div>
            </td>
            <td style="width: 10px;">
              <div class="rounded-full cursor-pointer" (click)="deleteAdmin(duser.uuid)">
                <div class="justify-center text-center ">
                  <i class="fas fa-trash-alt fa-2x fa-fw fa-inverse text-red-500"></i>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <pagination-controls id="Page" (pageChange)="p = $event" nextLabel="Siguiente" previousLabel="Anterior">
      </pagination-controls>
    </div>
    <div class="tabla2 datagrid border rounded-md ">
      <table>
        <thead style="text-align: center;">
          <tr>
            <th>NO</th>
            <th>NOMBRE</th>
            <th>USUARIO</th>
            <th>ROL</th>
            <th>EDITAR</th>
            <th>ELIMINAR</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let duser of bosses | paginate: { id: 'Page2', itemsPerPage: tableSize, currentPage: p2 } let indexof = index let u of usuario;"
            class="text-lg" [class.alt]="(indexof + 1)%2==1">
            <td style="text-align: center;">{{tableSize * (p2 -1 ) + indexof + 1}}</td>
            <td>{{duser.fullname | titlecase}}</td>
            <td style="text-align: center;">{{duser.username}}</td>
            <td>{{duser.rol}}</td>
            <td style="width: 10px;">
              <div class="rounded-full cursor-pointer" (click)="UpdateUser(duser.uuid)">
                <div class="justify-center text-center ">
                  <i class="fas fa-edit fa-2x fa-fw fa-inverse text-green-500"></i>
                </div>
              </div>
            </td>
            <td style="width: 10px;">
              <div class="rounded-full cursor-pointer" (click)="deletePerson(duser.uuid, duser.uuidPerson)">
                <div class="justify-center text-center ">
                  <i class="fas fa-trash-alt fa-2x fa-fw fa-inverse text-red-500"></i>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <pagination-controls id="Page2" (pageChange)="p2 = $event" nextLabel="Siguiente" previousLabel="Anterior">
      </pagination-controls>
    </div>
    <div class="tabla3 datagrid border rounded-md ">
      <table >
        <thead style="text-align: center;">
          <tr>
            <th>NO</th>
            <th>NOMBRE</th>
            <th>USUARIO</th>
            <th>ROL</th>
            <th>EDITAR</th>
            <th>ELIMINAR</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let duser of employees | paginate: { id: 'Page3', itemsPerPage: tableSize, currentPage: p3} let indexof = index let u of employees;"
            class="text-lg" [class.alt]="(indexof + 1)%2==1">
            <td style="text-align: center;">{{tableSize * (p3 -1 ) + indexof + 1}}</td>
            <td>{{duser.fullname | titlecase}}</td>
            <td style="text-align: center;">{{duser.username}}</td>
            <td>{{duser.rol}}</td>
            <td style="width: 10px;">
              <div class="rounded-full cursor-pointer" (click)="UpdateUser(duser.uuid)">
                <div class="justify-center text-center ">
                  <i class="fas fa-edit fa-2x fa-fw fa-inverse text-green-500"></i>
                </div>
              </div>
            </td>
            <td style="width: 10px;">
              <div class="rounded-full cursor-pointer" (click)="deletePerson(duser.uuid, duser.uuidPerson)">
                <div class="justify-center text-center ">
                  <i class="fas fa-trash-alt fa-2x fa-fw fa-inverse text-red-500"></i>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <pagination-controls id="Page3" (pageChange)="p3 = $event" nextLabel="Siguiente" previousLabel="Anterior">
      </pagination-controls>
    </div>
  </div>
</div>
